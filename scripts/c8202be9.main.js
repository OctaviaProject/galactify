(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};o=function(a){return Math.floor(Math.random()*a)},q=function(a,b,c){return a.substr(0,c)+b+a.substr(c+1)},c=function(a){var b,c;return c=a.split(" "),c=function(){var a,d,e;for(e=[],a=0,d=c.length;d>a;a++)b=c[a],e.push(b.charAt(0).toUpperCase()+b.slice(1));return e}(),c.join(" ")},m=function(a){return a[o(a.length)]},w="aeoiu",d="bcdfghjklmnpqrstvwxyz",u=1e3,j=function(a,b){var e,f,g,h,i,j;for(a=a.toLowerCase(),e=a.length,i=j=0;b>=0?b>=j:j>=b;i=b>=0?++j:--j)f=o(e),g=a[f],h=x.call(w,g)>=0?w[o(w.length)]:x.call(d,g)>=0?d[o(d.length)]:g,a=q(a,h,f);return c(a)},k=function(){var b,c,d,e,f,g;return f=$("#name").val(),b=f.length/3,e=j(f,b),g=s(e),c="You are "+e+", the "+g.adjective+" "+g.job+" from "+g.planet+".",t(),l(),$("#bio").html(c),d=function(){return $("#results-view").fadeIn(u),a(e,g.adjective,g.job,g.planet)},$("#input").fadeOut(u,d)},e=function(){var a,b,e,f,g,h;for(a=1+o(7),Math.random()<.3,e="",g=h=0;a>=0?a>=h:h>=a;g=a>=0?++h:--h)b=m(f?w:d),f=!f,e+=b;return c(e)},r=function(){var a;return $("#name").val(""),a=function(){return $("#input").fadeIn(u),p()},$("#results-view").fadeOut(u,a)},$(document).keypress(function(a){return 13===a.which?k():void 0}),$("#morph-me").click(function(a){return k()}),$("#again").click(function(a){return r()}),$("#gallery").click(function(a){var b;return b=function(){return $("#gallery-view").fadeIn(u)},$("#results-view").fadeOut(u,b)}),$("#back").click(function(a){var b;return b=function(){return $("#results-view").fadeIn(u)},$("#gallery-view").fadeOut(u,b)}),s=function(a){var c,d,g,h,i;return c=m(b),d=m(f),g=e(),i=m(n),h=i.replace("%%planet%%",g),{adjective:c,job:d,planet:h}},navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,v=document.querySelector("video"),window.canvas=document.querySelector("canvas"),window.ctx=window.canvas.getContext("2d"),g=null,p=function(){var a;return $(window.canvas).remove(),a=$(document.createElement("canvas")).attr("width",300).attr("height",300).attr("id","photo").css("border-radius","150px"),$("#output").append(a),window.canvas=document.querySelector("canvas"),window.ctx=window.canvas.getContext("2d")},t=function(){return g?window.ctx.drawImage(v,0,0,300,300):void 0},a=function(a,b,c,d){var e,f,g,h;return f=window.canvas.toDataURL("image/png"),g=$(document.createElement("img")),g.attr("src",f),g.attr("title",""+b+" "+c+", "+d),g.tooltip(),h=$(document.createElement("span")),h.html(a),e=$(document.createElement("div")),e.attr("class","bio-container"),e.append(g),e.append(h),$("#gallery-view").prepend(e)},h=function(a){return v.src=window.URL.createObjectURL(a),g=a},i=function(){return console.log("foo")},navigator.getUserMedia({video:!0},h,i),l=function(){return Caman("#photo",function(){return this.brightness(20),this.saturation(o(80)-20),this.contrast(40),this.clip(10+o(60)),this.hue(o(100)),this.exposure(30),this.sepia(o(60)),this.sharpen(o(100)),this.render()})},b=["honorable","ruthless","immortal","wise","adolescent","atemporal","analog","adventurous","angelic","bubbly","big-haired","benevolent","charming","geometric","gorgeous","circular","dimpled","digital","edible","envied","exalted","frugal","fuzzy","feline","flickering","French","gleaming","majestic","hilarious","handsome","hospitable","immaculate","infamous","jubilant","kaleidoscopic","kooky","rainbow","mysterious","metallic","gleaming","recursive","bioluminescent","notable","old-fashioned","opulent","posh","pushy","revolving","stylish","sophisticated","serpentine","thirsty","triangular","tidy","tender","unlawful","unusual","virtual","holographic","teenage","zesty","wide-eyed","bite-sized","reclusive","subterranean","microscopic"],f=["shapeshifter","android","cephalopod","disembodied head","alchemist","barber","engineer","telepath","royal","chimera","mechanic","landlord","mermaid","ambassador","architect","botanist","bounty hunter","mathematician","roboticist","insectoid","clone","pilot","net-girl","it-girl","idol","financier","fortune teller","cleric","ball of pure energy","pixie","wraith","security officer","librarian","doctor","spy","romance novelist","hacker","plant creature","thief","charlatan","pegasus","minotaur","banshee","dancer","sorcerer","swindler","beastmaster","scrap collector","mind harpist","chanteuse","bureaucrat"],n=["pleasure planet %%planet%%","exile planet %%planet%%","desert planet %%planet%%","the ice moon of %%planet%%","planet %%planet%%","floating city of %%planet%%","starbase %%planet%%","the cloud city of %%planet%%","the %%planet%% asteroid","the %%planet%% system","the %%planet%% empire","lava planet %%planet%%"]}).call(this);